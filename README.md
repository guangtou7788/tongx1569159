# 同欣牙科产品门店数据自动抓取脚本

这是一个基于 Python 和 GitHub Actions 的自动化脚本，用于每日定时抓取指定牙科产品（如“悦享涂氟”、“悦享窝沟”等）在各个城市支持的门店列表数据。

项目会自动将每日抓取的结果保存在以当天日期命名的文件夹中，方便进行归档和追踪。

## ✨ 主要功能

- **自动抓取**: 脚本会根据预设的产品列表，自动请求并解析门店数据。
- **定时执行**: 通过 GitHub Actions 实现无人值守的定时自动化运行（默认每周四）。
- **结构化存储**: 抓取结果以 `JSON` 格式保存，便于后续的数据分析和使用。
- **自动归档**: 每次运行都会创建一个以当天日期 (`YYYY-MM-DD`) 命名的文件夹来存放结果，使数据结构清晰。
- **结果推送**: 脚本运行结束后，可通过 Bark 发送推送通知。

## 📂 项目结构

```
.
├── .github/workflows/
│   └── run.yml           # GitHub Actions 核心配置文件
├── 2025-09-25/             # 每日生成的存档目录（示例）
│   ├── 悦享涂氟_0925.json
│   └── 悦享窝沟_0925.json
├── main.py               # 主程序脚本
├── requirements.txt      # Python 依赖库
└── README.md             # 项目说明文件
```

## ⚙️ 工作流程

1.  **定时触发**: GitHub Actions 根据 `.github/workflows/run.yml` 文件中设定的 `cron` 表达式，在预定时间自动触发工作流。
2.  **环境准备**: Action 会自动配置 Python 环境并根据 `requirements.txt` 安装所需依赖。
3.  **执行脚本**: 运行 `main.py` 脚本。
4.  **创建目录**: 脚本首先会创建一个以当前日期（例如 `2025-09-25`）命名的文件夹。
5.  **数据抓取**: 脚本会遍历预设的产品和城市列表，抓取所有门店数据。
6.  **保存文件**: 将每个产品的抓取结果保存为独立的 `.json` 文件，并存放在当天创建的日期目录中。
7.  **提交代码**: Action 会自动将新生成的日期目录及所有数据文件提交 (Commit) 并推送 (Push) 到本代码仓库。
8.  **发送通知**: 任务完成后，发送一条 Bark 推送告知运行结果。

## 🚀 如何使用

### 1. 自动化运行（推荐）

此项目已配置好 GitHub Actions，您 Fork 本项目后，它将根据默认设置自动运行。

- **定时任务**: 默认配置为**每周四凌晨 3:00 (北京时间)** 自动运行。您可以修改 `run.yml` 文件中的 `cron` 表达式来调整周期。
- **手动触发**: 您也可以随时进入仓库的 `Actions` 页面，选择 `爬取同欣产品地址` 工作流，然后点击 `Run workflow` 手动触发一次。

### 2. 本地手动运行

如果您需要在本地调试或运行此脚本，请按以下步骤操作：

1.  **克隆代码库**:
    ```bash
    git clone [https://github.com/your-username/your-repository.git](https://github.com/your-username/your-repository.git)
    cd your-repository
    ```

2.  **安装依赖**:
    ```bash
    pip install -r requirements.txt
    ```

3.  **修改配置**:
    打开 `main.py` 文件，根据需要修改以下部分：
    - `PRODUCTS`: 需要抓取的产品列表。
    - `BARK_KEY`: 您的 Bark 推送密钥。
    - `HEADERS_TPL`: **（重要）** 根据您获取的实际情况，修改请求头中的 `token` 值。

    ```python
    # main.py L:66
    HEADERS_TPL = {
        # ...
        "token": "f2436cdd-e3ad-47ef-80ab-e007bdb5614a",  # <<<<<< 可能需要修改这里
    }
    ```

4.  **运行脚本**:
    ```bash
    python main.py
    ```
    运行结束后，您将在项目根目录下看到一个以当天日期命名的新文件夹，其中包含了抓取到的 `.json` 文件。
